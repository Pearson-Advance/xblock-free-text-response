function FreeTextResponseView(a,b,c){"use strict";function d(a){p.removeClass("correct"),p.removeClass("incorrect"),p.removeClass("unanswered"),p.addClass(a)}var e=window.jQuery,f=c.freetextBlockId;null!=localStorage.getItem("student_answer_saved_"+f)&&e("#"+f).html(localStorage.getItem("student_answer_saved_"+f));var g=e(b),h=e("#seq_content"),i=g.find(".check.Submit"),j=g.find(".save"),k=g.find(".action .used-attempts-feedback"),l=g.find(".problem-progress"),m=g.find(".submission-received"),n=g.find(".user_alert"),o=g.find(".student_answer"),p=o.parent(),q=a.handlerUrl(b,"submit"),r=a.handlerUrl(b,"save_reponse"),s=f+"_cached_answer",t=f+"_problem_progress",u=f+"_used_attempts_feedback";void 0!==h.data(s)&&(o.text(h.data(s)),l.text(h.data(t)),k.text(h.data(u))),a.notify=a.notify||function(){console.log("POLYFILL runtime.notify",arguments)},i.on("click",function(){return i.text(i[0].dataset.checking),a.notify("submit",{message:"Submitting...",state:"start"}),localStorage.removeItem("student_answer_saved_"+f),e.ajax(q,{type:"POST",data:JSON.stringify({student_answer:g.find(".student_answer").val()}),success:function(b){k.text(b.used_attempts_feedback),i.addClass(b.nodisplay_class),l.text(b.problem_progress),m.text(b.submitted_message),i.text(i[0].dataset.value),n.text(b.user_alert),j.addClass(b.nodisplay_class),d(b.indicator_class),h.data(s,g.find(".student_answer").val()),h.data(t,b.problem_progress),h.data(u,b.used_attempts_feedback),a.notify("submit",{state:"end"})},error:function(){a.notify("error",{})}}),!1}),j.on("click",function(){j.text(j[0].dataset.checking),a.notify("save",{message:"Saving...",state:"start"});var b=e("#"+f).val();return localStorage.setItem("student_answer_saved_"+f,b),e.ajax(r,{type:"POST",data:JSON.stringify({student_answer:g.find(".student_answer").val()}),success:function(b){i.addClass(b.nodisplay_class),j.addClass(b.nodisplay_class),k.text(b.used_attempts_feedback),l.text(b.problem_progress),m.text(b.submitted_message),j.text(j[0].dataset.value),n.text(b.user_alert),h.data(s,g.find(".student_answer").val()),h.data(t,b.problem_progress),h.data(u,b.used_attempts_feedback),a.notify("save",{state:"end"})},error:function(){a.notify("error",{})}}),!1}),o.on("keydown",function(){m.text(""),n.text(""),d("unanswered")})}
//# sourceMappingURL=view.js.min.js.map
